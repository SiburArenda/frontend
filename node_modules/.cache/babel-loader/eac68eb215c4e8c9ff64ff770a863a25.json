{"ast":null,"code":"var _jsxFileName = \"C:\\\\My\\\\Projects\\\\Web\\\\sibur_arenda_1.0\\\\src\\\\components\\\\ApplicationForm.js\";\nimport React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { Room, TypeOfEvent } from '../functional/EnumsAndConsts';\nimport Calendar from \"./Calendar\";\nimport '../resource/styles/ApplicationForm.css';\n\nclass FromTo {\n  constructor(from, to) {\n    this.from = from;\n    this.to = to;\n  }\n\n}\n\nclass ApplicationForm extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      eventName: null,\n      eventType: TypeOfEvent.CONCERT,\n      rooms: [],\n      viewersExpected: false,\n      viewers: 0,\n      comment: '',\n      offsetX: 0,\n      offsetY: 0,\n      dragged: false\n    };\n    this.position = {\n      top: '40px',\n      left: '400px'\n    };\n\n    this.handleInput = e => {\n      this.setState({\n        [e.target.name]: e.target.value\n      });\n    };\n\n    this.sendApplication = () => {\n      const nameJSON = `\"name\":\"${this.state.eventName}\",`;\n      const audJSON = `\"auditory\":${this.state.viewers},`;\n      const typeJSON = `\"type\":\"${this.state.eventType}\",`;\n      const roomsJSON = `\"rooms\":${JSON.stringify(this.state.rooms)},`;\n      const userJSON = `\"user\":\"${this.props.userName}\",`;\n      const datesArraySel = this.calendarRef.current.state.selectedDays;\n      const timesArraySel = this.calendarRef.current.state.selectedTimings;\n      const dateArrJSON = JSON.stringify(JSON.stringify(this.dateTimeJSON(datesArraySel, timesArraySel)));\n      const dateJSON = `\"dates\":${dateArrJSON},`;\n      const commentJSON = `\"comment\":\"${this.state.comment}\"`;\n      const toSend = '{' + nameJSON + audJSON + typeJSON + roomsJSON + userJSON + dateJSON + commentJSON + '}';\n      const request = new XMLHttpRequest();\n\n      request.onreadystatechange = function () {\n        if (request.readyState === 4) {\n          console.log('OK!');\n        }\n      };\n\n      request.open('POST', 'http://siburarenda.publicvm.com/api/user/order', true);\n      request.setRequestHeader('Authorization', 'Bearer_' + this.props.token);\n      request.setRequestHeader('Content-Type', 'application/json');\n      request.send(toSend);\n    };\n\n    this.dateTimeConstruction = (datesArray, timesArray) => {\n      const datesTimesArrayFrom = [];\n      const dateTimesArrayTo = [];\n\n      for (let i = 0; i < datesArray.length; i++) {\n        const dividedDate = datesArray[i].split(' ');\n        const t = timesArray[i];\n        const stringRepFrom = `${dividedDate[0]} ${dividedDate[1]} ${dividedDate[2]} ${this.leadZero(t.startH)}:${this.leadZero(t.startM)}:00 NOVT ${dividedDate[3]}`;\n        const stringRepTo = `${dividedDate[0]} ${dividedDate[1]} ${dividedDate[2]} ${this.leadZero(t.endH)}:${this.leadZero(t.endM)}:00 NOVT ${dividedDate[3]}`;\n        datesTimesArrayFrom.push(stringRepFrom);\n        dateTimesArrayTo.push(stringRepTo);\n      }\n\n      return [datesTimesArrayFrom, dateTimesArrayTo];\n    };\n\n    this.dateTimeJSON = (dates, times) => {\n      const dt = this.dateTimeConstruction(dates, times); // [0] = from, [1] = to\n\n      const res = [];\n\n      for (let i = 0; i < dt[0].length; i++) {\n        res.push(new FromTo(dt[0][i], dt[1][i]));\n      }\n\n      return res;\n    };\n\n    this.leadZero = num => {\n      let ans = num + \"\";\n\n      while (ans.length < 2) {\n        ans = '0' + ans;\n      }\n\n      return ans;\n    };\n\n    this.addRoom = e => {\n      if (!this.state.rooms.includes(e.target.value)) {\n        this.setState({\n          rooms: [...this.state.rooms, e.target.value]\n        });\n      }\n    };\n\n    this.startFormDrag = e => {\n      if (e.target.className.indexOf('drag-detector') !== -1) {\n        const mouseX = +e.screenX;\n        const mouseY = +e.screenY;\n        const formXpx = e.target.style.left;\n        const formX = +formXpx.substr(0, formXpx.length - 2);\n        const formYpx = e.target.style.top;\n        const formY = +formYpx.substr(0, formYpx.length - 2);\n        const offsetX = mouseX - formX;\n        const offsetY = mouseY - formY;\n        this.setState({\n          offsetX: offsetX,\n          offsetY: offsetY,\n          dragged: true\n        });\n      }\n    };\n\n    this.dragForm = e => {\n      if (this.state.dragged) {\n        e.target.style.top = +e.screenY - this.state.offsetY + 'px';\n        e.target.style.left = +e.screenX - this.state.offsetX + 'px';\n      }\n    };\n\n    this.stopDrag = () => {\n      if (this.state.dragged) {\n        this.setState({\n          dragged: false\n        });\n      }\n    };\n\n    this.calendarRef = React.createRef();\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      id: \"application-form\",\n      className: \"drag-detector\",\n      style: this.position,\n      onMouseDown: e => this.startFormDrag(e),\n      onMouseMove: e => this.dragForm(e),\n      onMouseUp: () => this.stopDrag(),\n      onMouseOut: () => this.stopDrag(),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 41,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"button\", {\n      onClick: this.props.closeAppWindow,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 49,\n        columnNumber: 17\n      }\n    }, \"X\"), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 50,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(\"label\", {\n      className: \"drag-detector\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 51,\n        columnNumber: 17\n      }\n    }, \"\\u041D\\u0430\\u0437\\u0432\\u0430\\u043D\\u0438\\u0435 \\u043C\\u0435\\u0440\\u043E\\u043F\\u0440\\u0438\\u044F\\u0442\\u0438\\u044F: \"), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"text\",\n      name: \"eventName\",\n      onChange: e => {\n        this.handleInput(e);\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 52,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 54,\n        columnNumber: 21\n      }\n    }), /*#__PURE__*/React.createElement(\"label\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 55,\n        columnNumber: 17\n      }\n    }, \"\\u0422\\u0438\\u043F \\u043C\\u0435\\u0440\\u043E\\u043F\\u0440\\u0438\\u044F\\u0442\\u0438\\u044F: \"), /*#__PURE__*/React.createElement(\"select\", {\n      name: \"eventType\",\n      onChange: e => {\n        this.handleInput(e);\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 56,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"option\", {\n      value: TypeOfEvent.CONCERT,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 59,\n        columnNumber: 21\n      }\n    }, \"\\u041A\\u043E\\u043D\\u0446\\u0435\\u0440\\u0442, \\u043F\\u0440\\u0435\\u0434\\u0441\\u0442\\u0430\\u0432\\u043B\\u0435\\u043D\\u0438\\u0435\"), /*#__PURE__*/React.createElement(\"option\", {\n      value: TypeOfEvent.PARTY,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 60,\n        columnNumber: 21\n      }\n    }, \"\\u041A\\u043E\\u0440\\u043F\\u043E\\u0440\\u0430\\u0442\\u0438\\u0432\"), /*#__PURE__*/React.createElement(\"option\", {\n      value: \"SPORT\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 61,\n        columnNumber: 21\n      }\n    }, \"\\u0421\\u043F\\u043E\\u0440\\u0442\"), /*#__PURE__*/React.createElement(\"option\", {\n      value: TypeOfEvent.OTHER,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 21\n      }\n    }, \"\\u0414\\u0440\\u0443\\u0433\\u043E\\u0435\")), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 63,\n        columnNumber: 26\n      }\n    }), ['SPORT', 'MATCH', 'TRAINING'].includes(this.state.eventType) ? /*#__PURE__*/React.createElement(React.Fragment, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 66,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"input\", {\n      name: \"eventType\",\n      type: \"radio\",\n      value: \"TRAINING\",\n      onChange: e => {\n        this.handleInput(e);\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 25\n      }\n    }), /*#__PURE__*/React.createElement(\"label\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 69,\n        columnNumber: 29\n      }\n    }, \"\\u0422\\u0440\\u0435\\u043D\\u0438\\u0440\\u043E\\u0432\\u043A\\u0430\"), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 69,\n        columnNumber: 54\n      }\n    }), /*#__PURE__*/React.createElement(\"input\", {\n      name: \"eventType\",\n      type: \"radio\",\n      value: \"MATCH\",\n      onChange: e => {\n        this.handleInput(e);\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 70,\n        columnNumber: 25\n      }\n    }), /*#__PURE__*/React.createElement(\"label\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 29\n      }\n    }, \"\\u041C\\u0430\\u0442\\u0447\"), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 48\n      }\n    })) : null, /*#__PURE__*/React.createElement(\"label\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 17\n      }\n    }, \"\\u041F\\u043E\\u043C\\u0435\\u0449\\u0435\\u043D\\u0438\\u0435: \"), /*#__PURE__*/React.createElement(\"select\", {\n      name: \"room\",\n      onChange: e => {\n        this.addRoom(e);\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 17\n      }\n    }, Room.map(roomInfo => /*#__PURE__*/React.createElement(\"option\", {\n      key: roomInfo.stringId,\n      value: roomInfo.stringId,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 25\n      }\n    }, roomInfo.rusName))), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 26\n      }\n    }), this.state.rooms.map(roomName => {\n      return /*#__PURE__*/React.createElement(\"span\", {\n        key: roomName,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 85,\n          columnNumber: 28\n        }\n      }, `${roomName}   `);\n    }), this.state.eventType === TypeOfEvent.OTHER ? /*#__PURE__*/React.createElement(React.Fragment, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 90,\n        columnNumber: 25\n      }\n    }, \"\\u041E\\u0436\\u0438\\u0434\\u0430\\u0435\\u0442\\u0441\\u044F \\u043B\\u0438 \\u043D\\u0430 \\u0412\\u0430\\u0448\\u0435\\u043C \\u043C\\u0435\\u0440\\u043E\\u043F\\u0440\\u0438\\u044F\\u0442\\u0438\\u0438 \\u0437\\u0440\\u0438\\u0442\\u0435\\u043B\\u044C\\u0441\\u043A\\u0430\\u044F \\u0430\\u0443\\u0434\\u0438\\u0442\\u043E\\u0440\\u0438\\u044F?\"), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 90,\n        columnNumber: 96\n      }\n    }), /*#__PURE__*/React.createElement(\"input\", {\n      name: \"viewersExpected\",\n      type: \"radio\",\n      value: true,\n      onChange: e => {\n        this.handleInput(e);\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 91,\n        columnNumber: 25\n      }\n    }), /*#__PURE__*/React.createElement(\"label\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 29\n      }\n    }, \"\\u0414\\u0430\"), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 46\n      }\n    }), /*#__PURE__*/React.createElement(\"input\", {\n      name: \"viewersExpected\",\n      type: \"radio\",\n      value: false,\n      onChange: e => {\n        this.handleInput(e);\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 25\n      }\n    }), /*#__PURE__*/React.createElement(\"label\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 96,\n        columnNumber: 29\n      }\n    }, \"\\u041D\\u0435\\u0442\"), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 96,\n        columnNumber: 47\n      }\n    })) : null, ['MATCH', 'PARTY'].includes(this.state.eventType) || this.state.viewersExpected === 'true' ? /*#__PURE__*/React.createElement(React.Fragment, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 103,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 104,\n        columnNumber: 25\n      }\n    }, \"\\u041A\\u0430\\u043A\\u043E\\u0435 \\u043A\\u043E\\u043B\\u0438\\u0447\\u0435\\u0441\\u0442\\u0432\\u043E \\u0437\\u0440\\u0438\\u0442\\u0435\\u043B\\u0435\\u0439 \\u0412\\u044B \\u043F\\u0440\\u0435\\u0434\\u043F\\u043E\\u043B\\u0430\\u0433\\u0430\\u0435\\u0442\\u0435?\"), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"text\",\n      name: \"viewers\",\n      onChange: e => {\n        this.handleInput(e);\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 105,\n        columnNumber: 25\n      }\n    }), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 107,\n        columnNumber: 29\n      }\n    })) : null, /*#__PURE__*/React.createElement(Calendar, {\n      ref: this.calendarRef,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 112,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 112,\n        columnNumber: 51\n      }\n    }), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"text\",\n      name: \"comment\",\n      onChange: e => this.handleInput(e),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 113,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(\"button\", {\n      onClick: e => this.sendApplication(e),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 114,\n        columnNumber: 17\n      }\n    }, \"send\"));\n  }\n\n}\n\nApplicationForm.propTypes = {\n  closeAppWindow: PropTypes.func.isRequired,\n  userName: PropTypes.string.isRequired,\n  token: PropTypes.string.isRequired\n};\nexport default ApplicationForm;","map":{"version":3,"sources":["C:/My/Projects/Web/sibur_arenda_1.0/src/components/ApplicationForm.js"],"names":["React","Component","PropTypes","Room","TypeOfEvent","Calendar","FromTo","constructor","from","to","ApplicationForm","props","state","eventName","eventType","CONCERT","rooms","viewersExpected","viewers","comment","offsetX","offsetY","dragged","position","top","left","handleInput","e","setState","target","name","value","sendApplication","nameJSON","audJSON","typeJSON","roomsJSON","JSON","stringify","userJSON","userName","datesArraySel","calendarRef","current","selectedDays","timesArraySel","selectedTimings","dateArrJSON","dateTimeJSON","dateJSON","commentJSON","toSend","request","XMLHttpRequest","onreadystatechange","readyState","console","log","open","setRequestHeader","token","send","dateTimeConstruction","datesArray","timesArray","datesTimesArrayFrom","dateTimesArrayTo","i","length","dividedDate","split","t","stringRepFrom","leadZero","startH","startM","stringRepTo","endH","endM","push","dates","times","dt","res","num","ans","addRoom","includes","startFormDrag","className","indexOf","mouseX","screenX","mouseY","screenY","formXpx","style","formX","substr","formYpx","formY","dragForm","stopDrag","createRef","render","closeAppWindow","PARTY","OTHER","map","roomInfo","stringId","rusName","roomName","propTypes","func","isRequired","string"],"mappings":"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","sourcesContent":["import React, {Component} from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport {Room, TypeOfEvent} from '../functional/EnumsAndConsts'\r\nimport Calendar from \"./Calendar\";\r\nimport '../resource/styles/ApplicationForm.css'\r\n\r\nclass FromTo {\r\n    constructor(from, to) {\r\n        this.from = from;\r\n        this.to = to;\r\n    }\r\n}\r\n\r\nclass ApplicationForm extends Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.calendarRef = React.createRef();\r\n    }\r\n\r\n    state = {\r\n        eventName: null,\r\n        eventType: TypeOfEvent.CONCERT,\r\n        rooms: [],\r\n        viewersExpected: false,\r\n        viewers: 0,\r\n        comment: '',\r\n        offsetX: 0,\r\n        offsetY: 0,\r\n        dragged: false\r\n    };\r\n\r\n    position = {\r\n        top: '40px',\r\n        left: '400px'\r\n    };\r\n\r\n    render() {\r\n        return (\r\n            <div id='application-form'\r\n                 className='drag-detector'\r\n                 style={this.position}\r\n                 onMouseDown={e => this.startFormDrag(e)}\r\n                 onMouseMove={e => this.dragForm(e)}\r\n                 onMouseUp={() => this.stopDrag()}\r\n                 onMouseOut={() => this.stopDrag()}\r\n            >\r\n                <button onClick={this.props.closeAppWindow}>X</button>\r\n                <br/>\r\n                <label className='drag-detector'>Название мероприятия: </label>\r\n                <input type='text' name='eventName' onChange={(e) => {\r\n                    this.handleInput(e)\r\n                }}/><br/>\r\n                <label>Тип мероприятия: </label>\r\n                <select name='eventType' onChange={(e) => {\r\n                    this.handleInput(e)\r\n                }}>\r\n                    <option value={TypeOfEvent.CONCERT}>Концерт, представление</option>\r\n                    <option value={TypeOfEvent.PARTY}>Корпоратив</option>\r\n                    <option value='SPORT'>Спорт</option>\r\n                    <option value={TypeOfEvent.OTHER}>Другое</option>\r\n                </select><br/>\r\n                {['SPORT', 'MATCH', 'TRAINING'].includes(this.state.eventType)\r\n                    ?\r\n                    <React.Fragment>\r\n                        <input name='eventType' type='radio' value='TRAINING' onChange={(e) => {\r\n                            this.handleInput(e)\r\n                        }}/><label>Тренировка</label><br/>\r\n                        <input name='eventType' type='radio' value='MATCH' onChange={(e) => {\r\n                            this.handleInput(e)\r\n                        }}/><label>Матч</label><br/>\r\n                    </React.Fragment>\r\n                    :\r\n                    null\r\n                }\r\n                <label>Помещение: </label>\r\n                <select name='room' onChange={(e) => {\r\n                    this.addRoom(e)\r\n                }}>\r\n                    {Room.map((roomInfo) =>\r\n                        <option key={roomInfo.stringId} value={roomInfo.stringId}>{roomInfo.rusName}</option>)}\r\n                </select><br/>\r\n                {this.state.rooms.map(roomName => {\r\n                    return <span key={roomName}>{`${roomName}   `}</span>\r\n                })}\r\n                {this.state.eventType === TypeOfEvent.OTHER\r\n                    ?\r\n                    <React.Fragment>\r\n                        <label>Ожидается ли на Вашем мероприятии зрительская аудитория?</label><br/>\r\n                        <input name='viewersExpected' type='radio' value={true} onChange={(e) => {\r\n                            this.handleInput(e)\r\n                        }}/><label>Да</label><br/>\r\n                        <input name='viewersExpected' type='radio' value={false} onChange={(e) => {\r\n                            this.handleInput(e)\r\n                        }}/><label>Нет</label><br/>\r\n                    </React.Fragment>\r\n                    :\r\n                    null\r\n                }\r\n                {['MATCH', 'PARTY'].includes(this.state.eventType) || this.state.viewersExpected === 'true'\r\n                    ?\r\n                    <React.Fragment>\r\n                        <label>Какое количество зрителей Вы предполагаете?</label>\r\n                        <input type='text' name='viewers' onChange={(e) => {\r\n                            this.handleInput(e)\r\n                        }}/><br/>\r\n                    </React.Fragment>\r\n                    :\r\n                    null\r\n                }\r\n                <Calendar ref={this.calendarRef}/><br/>\r\n                <input type='text' name='comment' onChange={e => this.handleInput(e)}/>\r\n                <button onClick={e => this.sendApplication(e)}>send</button>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    handleInput = (e) => {\r\n        this.setState({\r\n            [e.target.name]: e.target.value\r\n        });\r\n    };\r\n\r\n    sendApplication = () => {\r\n        const nameJSON = `\"name\":\"${this.state.eventName}\",`;\r\n        const audJSON = `\"auditory\":${this.state.viewers},`;\r\n        const typeJSON = `\"type\":\"${this.state.eventType}\",`;\r\n        const roomsJSON = `\"rooms\":${JSON.stringify(this.state.rooms)},`;\r\n        const userJSON = `\"user\":\"${this.props.userName}\",`;\r\n\r\n        const datesArraySel = this.calendarRef.current.state.selectedDays;\r\n        const timesArraySel = this.calendarRef.current.state.selectedTimings;\r\n        const dateArrJSON = JSON.stringify(JSON.stringify(this.dateTimeJSON(datesArraySel, timesArraySel)));\r\n        const dateJSON = `\"dates\":${dateArrJSON},`;\r\n\r\n        const commentJSON = `\"comment\":\"${this.state.comment}\"`;\r\n\r\n        const toSend = '{' + nameJSON + audJSON + typeJSON + roomsJSON + userJSON + dateJSON + commentJSON + '}';\r\n\r\n        const request = new XMLHttpRequest();\r\n\r\n        request.onreadystatechange = function () {\r\n            if (request.readyState === 4) {\r\n                console.log('OK!');\r\n            }\r\n        };\r\n\r\n        request.open('POST', 'http://siburarenda.publicvm.com/api/user/order', true);\r\n        request.setRequestHeader('Authorization', 'Bearer_' + this.props.token);\r\n        request.setRequestHeader('Content-Type', 'application/json');\r\n        request.send(toSend)\r\n    };\r\n\r\n    dateTimeConstruction = (datesArray, timesArray) => {\r\n        const datesTimesArrayFrom = [];\r\n        const dateTimesArrayTo = [];\r\n        for (let i = 0; i < datesArray.length; i++) {\r\n            const dividedDate = datesArray[i].split(' ');\r\n            const t = timesArray[i];\r\n            const stringRepFrom = `${dividedDate[0]} ${dividedDate[1]} ${dividedDate[2]} ${this.leadZero(t.startH)}:${this.leadZero(t.startM)}:00 NOVT ${dividedDate[3]}`;\r\n            const stringRepTo = `${dividedDate[0]} ${dividedDate[1]} ${dividedDate[2]} ${this.leadZero(t.endH)}:${this.leadZero(t.endM)}:00 NOVT ${dividedDate[3]}`;\r\n            datesTimesArrayFrom.push(stringRepFrom);\r\n            dateTimesArrayTo.push(stringRepTo);\r\n        }\r\n        return [datesTimesArrayFrom, dateTimesArrayTo];\r\n    };\r\n\r\n    dateTimeJSON = (dates, times) => {\r\n        const dt = this.dateTimeConstruction(dates, times); // [0] = from, [1] = to\r\n        const res = [];\r\n        for (let i = 0; i < dt[0].length; i++) {\r\n            res.push(new FromTo(dt[0][i], dt[1][i]));\r\n        }\r\n        return res;\r\n    };\r\n\r\n    leadZero = (num) => {\r\n        let ans = num + \"\";\r\n        while (ans.length < 2) {\r\n            ans = '0' + ans;\r\n        }\r\n        return ans;\r\n    };\r\n\r\n    addRoom = (e) => {\r\n        if (!this.state.rooms.includes(e.target.value)) {\r\n            this.setState({\r\n                rooms: [...this.state.rooms, e.target.value]\r\n            })\r\n        }\r\n    };\r\n\r\n    startFormDrag = (e) => {\r\n        if (e.target.className.indexOf('drag-detector') !== -1) {\r\n            const mouseX = +e.screenX;\r\n            const mouseY = +e.screenY;\r\n\r\n            const formXpx = e.target.style.left;\r\n            const formX = +formXpx.substr(0, formXpx.length - 2);\r\n\r\n            const formYpx = e.target.style.top;\r\n            const formY = +formYpx.substr(0, formYpx.length - 2);\r\n\r\n            const offsetX = mouseX - formX;\r\n            const offsetY = mouseY - formY;\r\n\r\n            this.setState({\r\n                offsetX: offsetX,\r\n                offsetY: offsetY,\r\n                dragged: true\r\n            })\r\n        }\r\n    };\r\n\r\n    dragForm = (e) => {\r\n        if (this.state.dragged) {\r\n            e.target.style.top = (+e.screenY - this.state.offsetY) + 'px';\r\n            e.target.style.left = (+e.screenX - this.state.offsetX) + 'px';\r\n        }\r\n    };\r\n\r\n    stopDrag = () => {\r\n        if (this.state.dragged) {\r\n            this.setState({\r\n                dragged: false\r\n            })\r\n        }\r\n    }\r\n}\r\n\r\nApplicationForm.propTypes = {\r\n    closeAppWindow: PropTypes.func.isRequired,\r\n    userName: PropTypes.string.isRequired,\r\n    token: PropTypes.string.isRequired\r\n};\r\n\r\nexport default ApplicationForm;"]},"metadata":{},"sourceType":"module"}